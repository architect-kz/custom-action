name: Test SSH Connection to Gateway

on:
  workflow_dispatch:  # Manual trigger

jobs:
  test-ssh-gateway:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # Add SSH key
      - name: Add SSH key
        run: |
          echo "${{ secrets.ISSAI_PRIVATE_KEY }}" > id_issai
          chmod 600 id_issai

      # Save secrets to environment file for debugging
      - name: Save secrets to environment file
        run: |
          echo "ISSAI_USERNAME=${{ secrets.ISSAI_USERNAME }}" >> env_secrets
          echo "ISSAI_HOST_GATEWAY=${{ secrets.ISSAI_HOST_GATEWAY }}" >> env_secrets

      # Print environment file
      - name: Print environment file
        run: cat env_secrets
